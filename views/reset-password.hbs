<html>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
<body>
    <div>
        <form>
            <label for="password">Resetujte lozinku.</label><br>
            <input id="actionCode" type="hidden" value={{actionCode}}>
            <input type="password" placeholder="Unesite novu lozinku" id="password">
            <i class="far fa-eye" id="togglePassword"
                style="margin-left: -30px; margin-top: 10px; cursor: pointer;"></i>
            </input>
            <button id="btn">
                Pošalji
            </button>
        </form>
    </div>
</body>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    const togglePassword = document.querySelector('#togglePassword');
    const password = document.querySelector('#password');
    const actionCode = document.querySelector('#actionCode').value

    togglePassword.addEventListener('click', function (e) {
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);
        this.classList.toggle('fa-eye-slash');
    });

    const passwordInput = document.getElementById("password");
    const btn = document.getElementById("btn");
    btn.addEventListener("click", () => {
        event.preventDefault();
        const password = passwordInput.value.trim();
        var pattern = /^\S*$/;

        if (password.length < 7) {
            alert("Lozinka mora da sadrži najmanje 7 karaktera");
        } else if (!pattern.test(password)) {
            alert("Lozinka ne može da sadrži prazan prostor između karaktera.");
        } else {
            axios.post("https://fit-flix-backend-temporary.herokuapp.com/usermgmt/usermgmt", {

                    newPassword: password,
                    actionCode: actionCode
                })
                .then((response) => {
                    alert("Uspešno promenjena lozinka")
                })
                .catch((error) => alert(error.message));
        }
    });
</script>
</html>